import{Q as b,r as z,o as E,a as s,c as o,b as t,e as x,H as h,V as f,N as g,S as m,M as a}from"./index-B2iR0-eh.js";import{n as p,i as k}from"./notification.helper-C8SuIj2j.js";async function N(){try{const{data:n}=await b.supabase.from("timers").select();return n}catch(n){console.error("timers.get",n)}}async function C(n){try{const e=new Date;switch(n){case"jotun":e.setHours(e.getHours()+2);break;case"hidra":e.setHours(e.getHours()+2);break;case"razador":e.setMinutes(e.getMinutes()+30);break}await b.supabase.from("timers").update({expires_at:e}).eq("boss",n)}catch(e){console.error("timers.markAsDone",e)}}async function D(n){try{await b.supabase.from("timers").update({expires_at:null}).eq("boss",n)}catch(e){console.error("timers.reset",e)}}const l={get:N,reset:D,markAsDone:C},H={class:"grid grid-cols-12 gap-8"},J={class:"col-span-12 lg:col-span-4 xl:col-span-4"},T={class:"card bg-green-50"},B={class:"flex justify-between mb-4"},M=t("span",{class:"block text-muted-color font-bold mb-4"},"Jotun",-1),A={key:0,class:"text-green-500 dark:text-surface-0 font-medium text-xl"},P={key:1,class:"text-orange-500 dark:text-surface-0 font-medium text-xl"},R={class:"text-muted-color"},V={key:0,class:"flex items-center justify-center bg-green-100 dark:bg-green-400/10 rounded-border",style:{width:"2.5rem",height:"2.5rem"}},$={key:1,class:"flex items-center justify-center bg-red-100 dark:bg-red-400/10 rounded-border",style:{width:"2.5rem",height:"2.5rem"}},q=t("i",{class:"pi pi-clock text-orange-500 !text-xl"},null,-1),S=[q],L={class:"col-span-12 lg:col-span-4 xl:col-span-4"},Q={class:"card bg-blue-100"},F={class:"flex justify-between mb-4"},G=t("span",{class:"block text-muted-color font-bold mb-4"},"Hidra",-1),I={key:0,class:"text-green-500 dark:text-surface-0 font-medium text-xl"},K={key:1,class:"text-orange-500 dark:text-surface-0 font-medium text-xl"},O={class:"text-muted-color"},U={key:0,class:"flex items-center justify-center bg-green-100 dark:bg-green-400/10 rounded-border",style:{width:"2.5rem",height:"2.5rem"}},W={key:1,class:"flex items-center justify-center bg-red-100 dark:bg-red-400/10 rounded-border",style:{width:"2.5rem",height:"2.5rem"}},X=t("i",{class:"pi pi-clock text-orange-500 !text-xl"},null,-1),Y=[X],Z={class:"col-span-12 lg:col-span-4 xl:col-span-4"},ee={class:"card bg-red-100"},te={class:"flex justify-between mb-4"},se=t("span",{class:"block text-muted-color font-bold mb-4"},"Razador",-1),oe={key:0,class:"text-green-500 dark:text-surface-0 font-medium text-xl"},re={key:1,class:"text-orange-500 dark:text-surface-0 font-medium text-xl"},ne={class:"text-muted-color"},ae={key:0,class:"flex items-center justify-center bg-green-100 dark:bg-green-400/10 rounded-border",style:{width:"2.5rem",height:"2.5rem"}},ie={key:1,class:"flex items-center justify-center bg-red-100 dark:bg-red-400/10 rounded-border",style:{width:"2.5rem",height:"2.5rem"}},de=t("i",{class:"pi pi-clock text-orange-500 !text-xl"},null,-1),ce=[de],me={__name:"Timers",setup(n){const e=z({jotun:null,razador:null,hidra:null});E(()=>y());async function y(){const u=await l.get(),i=new Date;u.forEach(r=>{const d=r.expires_at?new Date(r.expires_at):null;e.value[r.boss]=d?d-i:null})}async function v(){await l.reset("jotun"),p.showNotification("Cooldown dungeon","Já se pode fazer Jotun"),setTimeout(()=>{m.go()},1e3)}async function w(){await l.reset("razador"),p.showNotification("Cooldown dungeon","Já se pode fazer Razador"),setTimeout(()=>{m.go()},1e3)}async function j(){await l.reset("hidra"),p.showNotification("Cooldown dungeon","Já se pode fazer Hidra"),setTimeout(()=>{m.go()},1e3)}async function _(u){await l.markAsDone(u),m.go()}return(u,i)=>(s(),o("div",H,[t("div",J,[t("div",T,[t("div",B,[t("div",null,[M,e.value.jotun?(s(),o("div",P,"Em cooldown")):(s(),o("div",A,"Pode ser feito")),e.value.jotun?(s(),x(f(k),{key:2,time:e.value.jotun,onEnd:v},{default:h(({hours:r,minutes:d,seconds:c})=>[t("span",R,"Expira em："+a(r)+" horas, "+a(d)+" minutos, "+a(c)+" segundos.",1)]),_:1},8,["time"])):g("",!0)]),e.value.jotun?(s(),o("div",$,S)):(s(),o("div",V,[t("i",{class:"pi pi-check text-green-500 !text-xl cursor-pointer",onClick:i[0]||(i[0]=r=>_("jotun"))})]))])])]),t("div",L,[t("div",Q,[t("div",F,[t("div",null,[G,e.value.hidra?(s(),o("div",K,"Em cooldown")):(s(),o("div",I,"Pode ser feito")),e.value.hidra?(s(),x(f(k),{key:2,time:e.value.hidra,onEnd:j},{default:h(({hours:r,minutes:d,seconds:c})=>[t("span",O,"Expira em："+a(r)+" horas, "+a(d)+" minutos, "+a(c)+" segundos.",1)]),_:1},8,["time"])):g("",!0)]),e.value.hidra?(s(),o("div",W,Y)):(s(),o("div",U,[t("i",{class:"pi pi-check text-green-500 !text-xl cursor-pointer",onClick:i[1]||(i[1]=r=>_("hidra"))})]))])])]),t("div",Z,[t("div",ee,[t("div",te,[t("div",null,[se,e.value.razador?(s(),o("div",re,"Em cooldown")):(s(),o("div",oe,"Pode ser feito")),e.value.razador?(s(),x(f(k),{key:2,time:e.value.razador,onEnd:w},{default:h(({hours:r,minutes:d,seconds:c})=>[t("span",ne,"Expira em："+a(r)+" horas, "+a(d)+" minutos, "+a(c)+" segundos.",1)]),_:1},8,["time"])):g("",!0)]),e.value.razador?(s(),o("div",ie,ce)):(s(),o("div",ae,[t("i",{class:"pi pi-check text-green-500 !text-xl cursor-pointer",onClick:i[2]||(i[2]=r=>_("razador"))})]))])])])]))}};export{me as default};
