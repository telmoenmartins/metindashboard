import{Q as k,r as j,o as z,a as s,c as o,b as t,e as _,H as x,V as h,N as f,S as E,M as a}from"./index-_qb0jx07.js";import{n as g,i as p}from"./notification.helper-DdjXQuKj.js";async function N(){try{const{data:n}=await k.supabase.from("timers").select();return n}catch(n){console.error("timers.get",n)}}async function C(n){try{const e=new Date;switch(n){case"jotun":e.setHours(e.getHours()+2);break;case"hidra":e.setHours(e.getHours()+2);break;case"razador":e.setMinutes(e.getMinutes()+30);break}await k.supabase.from("timers").update({expires_at:e}).eq("boss",n)}catch(e){console.error("timers.markAsDone",e)}}async function D(n){try{await k.supabase.from("timers").update({expires_at:null}).eq("boss",n)}catch(e){console.error("timers.reset",e)}}const l={get:N,reset:D,markAsDone:C},H={class:"grid grid-cols-12 gap-8"},J={class:"col-span-12 lg:col-span-4 xl:col-span-4"},B={class:"card bg-green-50"},M={class:"flex justify-between mb-4"},A=t("span",{class:"block text-muted-color font-bold mb-4"},"Jotun",-1),P={key:0,class:"text-green-500 dark:text-surface-0 font-medium text-xl"},R={key:1,class:"text-orange-500 dark:text-surface-0 font-medium text-xl"},V={class:"text-muted-color"},$={key:0,class:"flex items-center justify-center bg-green-100 dark:bg-green-400/10 rounded-border",style:{width:"2.5rem",height:"2.5rem"}},q={key:1,class:"flex items-center justify-center bg-red-100 dark:bg-red-400/10 rounded-border",style:{width:"2.5rem",height:"2.5rem"}},S=t("i",{class:"pi pi-clock text-orange-500 !text-xl"},null,-1),T=[S],L={class:"col-span-12 lg:col-span-4 xl:col-span-4"},Q={class:"card bg-blue-100"},F={class:"flex justify-between mb-4"},G=t("span",{class:"block text-muted-color font-bold mb-4"},"Hidra",-1),I={key:0,class:"text-green-500 dark:text-surface-0 font-medium text-xl"},K={key:1,class:"text-orange-500 dark:text-surface-0 font-medium text-xl"},O={class:"text-muted-color"},U={key:0,class:"flex items-center justify-center bg-green-100 dark:bg-green-400/10 rounded-border",style:{width:"2.5rem",height:"2.5rem"}},W={key:1,class:"flex items-center justify-center bg-red-100 dark:bg-red-400/10 rounded-border",style:{width:"2.5rem",height:"2.5rem"}},X=t("i",{class:"pi pi-clock text-orange-500 !text-xl"},null,-1),Y=[X],Z={class:"col-span-12 lg:col-span-4 xl:col-span-4"},ee={class:"card bg-red-100"},te={class:"flex justify-between mb-4"},se=t("span",{class:"block text-muted-color font-bold mb-4"},"Razador",-1),oe={key:0,class:"text-green-500 dark:text-surface-0 font-medium text-xl"},re={key:1,class:"text-orange-500 dark:text-surface-0 font-medium text-xl"},ne={class:"text-muted-color"},ae={key:0,class:"flex items-center justify-center bg-green-100 dark:bg-green-400/10 rounded-border",style:{width:"2.5rem",height:"2.5rem"}},ie={key:1,class:"flex items-center justify-center bg-red-100 dark:bg-red-400/10 rounded-border",style:{width:"2.5rem",height:"2.5rem"}},de=t("i",{class:"pi pi-clock text-orange-500 !text-xl"},null,-1),ce=[de],me={__name:"Timers",setup(n){const e=j({jotun:null,razador:null,hidra:null});z(()=>b());async function b(){const u=await l.get(),i=new Date;u.forEach(r=>{const d=r.expires_at?new Date(r.expires_at):null;e.value[r.boss]=d?d-i:null}),console.log("timer",e.value)}async function v(){await l.reset("jotun"),g.showNotification("Cooldown dungeon","Já se pode fazer Jotun")}async function y(){await l.reset("razador"),g.showNotification("Cooldown dungeon","Já se pode fazer Razador")}async function w(){await l.reset("hidra"),g.showNotification("Cooldown dungeon","Já se pode fazer Hidra")}async function m(u){await l.markAsDone(u),E.go()}return(u,i)=>(s(),o("div",H,[t("div",J,[t("div",B,[t("div",M,[t("div",null,[A,e.value.jotun?(s(),o("div",R,"Em cooldown")):(s(),o("div",P,"Pode ser feito")),e.value.jotun?(s(),_(h(p),{key:2,time:e.value.jotun,onEnd:v},{default:x(({hours:r,minutes:d,seconds:c})=>[t("span",V,"Expira em："+a(r)+" horas, "+a(d)+" minutos, "+a(c)+" segundos.",1)]),_:1},8,["time"])):f("",!0)]),e.value.jotun?(s(),o("div",q,T)):(s(),o("div",$,[t("i",{class:"pi pi-check text-green-500 !text-xl cursor-pointer",onClick:i[0]||(i[0]=r=>m("jotun"))})]))])])]),t("div",L,[t("div",Q,[t("div",F,[t("div",null,[G,e.value.hidra?(s(),o("div",K,"Em cooldown")):(s(),o("div",I,"Pode ser feito")),e.value.hidra?(s(),_(h(p),{key:2,time:e.value.hidra,onEnd:w},{default:x(({hours:r,minutes:d,seconds:c})=>[t("span",O,"Expira em："+a(r)+" horas, "+a(d)+" minutos, "+a(c)+" segundos.",1)]),_:1},8,["time"])):f("",!0)]),e.value.hidra?(s(),o("div",W,Y)):(s(),o("div",U,[t("i",{class:"pi pi-check text-green-500 !text-xl cursor-pointer",onClick:i[1]||(i[1]=r=>m("hidra"))})]))])])]),t("div",Z,[t("div",ee,[t("div",te,[t("div",null,[se,e.value.razador?(s(),o("div",re,"Em cooldown")):(s(),o("div",oe,"Pode ser feito")),e.value.razador?(s(),_(h(p),{key:2,time:e.value.razador,onEnd:y},{default:x(({hours:r,minutes:d,seconds:c})=>[t("span",ne,"Expira em："+a(r)+" horas, "+a(d)+" minutos, "+a(c)+" segundos.",1)]),_:1},8,["time"])):f("",!0)]),e.value.razador?(s(),o("div",ie,ce)):(s(),o("div",ae,[t("i",{class:"pi pi-check text-green-500 !text-xl cursor-pointer",onClick:i[2]||(i[2]=r=>m("razador"))})]))])])])]))}};export{me as default};
